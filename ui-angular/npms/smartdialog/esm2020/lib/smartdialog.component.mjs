import { Component, Inject, ViewChild, ViewContainerRef, } from "@angular/core";
import { MAT_DIALOG_DATA } from "@angular/material/dialog";
import { SmartformComponent } from "@smartbit4all/form";
import * as i0 from "@angular/core";
import * as i1 from "@angular/material/dialog";
import * as i2 from "@angular/material/icon";
import * as i3 from "@smartbit4all/form";
import * as i4 from "@smartbit4all/table";
import * as i5 from "@angular/common";
export class SmartDialog {
    constructor(dialogRef, data, resolver) {
        this.dialogRef = dialogRef;
        this.data = data;
        this.resolver = resolver;
    }
    ngAfterViewInit() {
        const factory = this.resolver.resolveComponentFactory(this.data.customComponent);
        const ref = this.vcRef.createComponent(factory);
        ref.changeDetectorRef.detectChanges();
    }
    onActionClick() {
        const controls = this.smartFormComponent.getForm().controls;
        for (const control in controls) {
            if (controls[control].valid) {
                const widget = this.data.form.widgets.find((k) => k.key === control);
                if (widget) {
                    widget.value = controls[control].value;
                }
            }
        }
        if (this.data.actionCallback) {
            this.data.actionCallback([this.data]);
        }
    }
    onNoClick() {
        this.dialogRef.close();
    }
}
SmartDialog.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.2.7", ngImport: i0, type: SmartDialog, deps: [{ token: i1.MatDialogRef }, { token: MAT_DIALOG_DATA }, { token: i0.ComponentFactoryResolver }], target: i0.ɵɵFactoryTarget.Component });
SmartDialog.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.2.7", type: SmartDialog, selector: "smartdialog", viewQueries: [{ propertyName: "smartFormComponent", first: true, predicate: SmartformComponent, descendants: true }, { propertyName: "vcRef", first: true, predicate: ["renderComponentHere"], descendants: true, read: ViewContainerRef }], ngImport: i0, template: "<div\n    class=\"dialog-container\"\n    [ngClass]=\"data.size.fullScreen ? 'fullScreen' : ''\"\n    [ngStyle]=\"{ width: data.size.width + 'px', height: data.size.height + 'px' }\"\n>\n    <div class=\"dialog-title-container\" mat-dialog-title>\n        <h1 class=\"dialog-title\">\n            {{ data.content.title }}\n        </h1>\n        <button mat-icon-button [mat-dialog-close]=\"\">\n            <mat-icon aria-hidden=\"false\" aria-label=\"Example home icon\">close</mat-icon>\n        </button>\n    </div>\n    <div *ngIf=\"!data.customComponent\" mat-dialog-content class=\"content\">\n        <p>\n            {{ data.content.description }}\n        </p>\n        <smartform *ngIf=\"data.form\" [smartForm]=\"data.form!\"></smartform>\n        <smarttable *ngIf=\"data.table\" [smartTable]=\"data.table!\"></smarttable>\n    </div>\n    <div *ngIf=\"!data.customComponent\" class=\"action-container\" mat-dialog-actions>\n        <button\n            class=\"action-button\"\n            *ngIf=\"data.cancelCallback\"\n            mat-button\n            (click)=\"(data.cancelCallback)\"\n        >\n            Cancel\n        </button>\n        <button\n            class=\"action-button\"\n            *ngIf=\"data.okCallback\"\n            mat-button\n            (click)=\"(data.okCallback)\"\n            cdkFocusInitial\n        >\n            Ok\n        </button>\n        <button\n            class=\"action-button\"\n            *ngIf=\"data.actionCallback\"\n            mat-raised-button\n            (click)=\"onActionClick()\"\n        >\n            {{ data.actionLabel }}\n        </button>\n    </div>\n    <mat-dialog-content>\n        <ng-template #renderComponentHere></ng-template>\n    </mat-dialog-content>\n    <div *ngIf=\"data.customComponent\"></div>\n</div>\n", styles: [".dialog-container{position:relative}.dialog-title-container{display:flex;flex-direction:row;width:100%}.dialog-title-container button{text-align:right!important}.dialog-title{flex:20}.action-container{position:absolute;bottom:0;width:100%;display:flex;flex-direction:row}.action-button{flex:1;max-width:200px;margin-left:auto;margin-right:auto}.content{height:calc(100% - 116px)}.fullScreen{width:100%}\n"], components: [{ type: i2.MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { type: i3.SmartformComponent, selector: "smartform", inputs: ["smartForm"] }, { type: i4.SmarttableComponent, selector: "smarttable", inputs: ["smartTable"] }], directives: [{ type: i5.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i5.NgStyle, selector: "[ngStyle]", inputs: ["ngStyle"] }, { type: i1.MatDialogTitle, selector: "[mat-dialog-title], [matDialogTitle]", inputs: ["id"], exportAs: ["matDialogTitle"] }, { type: i1.MatDialogClose, selector: "[mat-dialog-close], [matDialogClose]", inputs: ["aria-label", "type", "mat-dialog-close", "matDialogClose"], exportAs: ["matDialogClose"] }, { type: i5.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i1.MatDialogContent, selector: "[mat-dialog-content], mat-dialog-content, [matDialogContent]" }, { type: i1.MatDialogActions, selector: "[mat-dialog-actions], mat-dialog-actions, [matDialogActions]" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.2.7", ngImport: i0, type: SmartDialog, decorators: [{
            type: Component,
            args: [{ selector: "smartdialog", template: "<div\n    class=\"dialog-container\"\n    [ngClass]=\"data.size.fullScreen ? 'fullScreen' : ''\"\n    [ngStyle]=\"{ width: data.size.width + 'px', height: data.size.height + 'px' }\"\n>\n    <div class=\"dialog-title-container\" mat-dialog-title>\n        <h1 class=\"dialog-title\">\n            {{ data.content.title }}\n        </h1>\n        <button mat-icon-button [mat-dialog-close]=\"\">\n            <mat-icon aria-hidden=\"false\" aria-label=\"Example home icon\">close</mat-icon>\n        </button>\n    </div>\n    <div *ngIf=\"!data.customComponent\" mat-dialog-content class=\"content\">\n        <p>\n            {{ data.content.description }}\n        </p>\n        <smartform *ngIf=\"data.form\" [smartForm]=\"data.form!\"></smartform>\n        <smarttable *ngIf=\"data.table\" [smartTable]=\"data.table!\"></smarttable>\n    </div>\n    <div *ngIf=\"!data.customComponent\" class=\"action-container\" mat-dialog-actions>\n        <button\n            class=\"action-button\"\n            *ngIf=\"data.cancelCallback\"\n            mat-button\n            (click)=\"(data.cancelCallback)\"\n        >\n            Cancel\n        </button>\n        <button\n            class=\"action-button\"\n            *ngIf=\"data.okCallback\"\n            mat-button\n            (click)=\"(data.okCallback)\"\n            cdkFocusInitial\n        >\n            Ok\n        </button>\n        <button\n            class=\"action-button\"\n            *ngIf=\"data.actionCallback\"\n            mat-raised-button\n            (click)=\"onActionClick()\"\n        >\n            {{ data.actionLabel }}\n        </button>\n    </div>\n    <mat-dialog-content>\n        <ng-template #renderComponentHere></ng-template>\n    </mat-dialog-content>\n    <div *ngIf=\"data.customComponent\"></div>\n</div>\n", styles: [".dialog-container{position:relative}.dialog-title-container{display:flex;flex-direction:row;width:100%}.dialog-title-container button{text-align:right!important}.dialog-title{flex:20}.action-container{position:absolute;bottom:0;width:100%;display:flex;flex-direction:row}.action-button{flex:1;max-width:200px;margin-left:auto;margin-right:auto}.content{height:calc(100% - 116px)}.fullScreen{width:100%}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.MatDialogRef }, { type: undefined, decorators: [{
                    type: Inject,
                    args: [MAT_DIALOG_DATA]
                }] }, { type: i0.ComponentFactoryResolver }]; }, propDecorators: { smartFormComponent: [{
                type: ViewChild,
                args: [SmartformComponent]
            }], vcRef: [{
                type: ViewChild,
                args: ["renderComponentHere", { read: ViewContainerRef }]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic21hcnRkaWFsb2cuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvc21hcnRkaWFsb2cvc3JjL2xpYi9zbWFydGRpYWxvZy5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi9wcm9qZWN0cy9zbWFydGRpYWxvZy9zcmMvbGliL3NtYXJ0ZGlhbG9nLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFFSCxTQUFTLEVBSVQsTUFBTSxFQUNOLFNBQVMsRUFDVCxnQkFBZ0IsR0FDbkIsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFnQixlQUFlLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUN6RSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQzs7Ozs7OztBQVF4RCxNQUFNLE9BQU8sV0FBVztJQVFwQixZQUNXLFNBQW9DLEVBQ1gsSUFBcUIsRUFDN0MsUUFBa0M7UUFGbkMsY0FBUyxHQUFULFNBQVMsQ0FBMkI7UUFDWCxTQUFJLEdBQUosSUFBSSxDQUFpQjtRQUM3QyxhQUFRLEdBQVIsUUFBUSxDQUEwQjtJQUMzQyxDQUFDO0lBRUosZUFBZTtRQUNYLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsdUJBQXVCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUNqRixNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsS0FBTSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNqRCxHQUFHLENBQUMsaUJBQWlCLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDMUMsQ0FBQztJQUVELGFBQWE7UUFDVCxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUMsT0FBTyxFQUFFLENBQUMsUUFBUSxDQUFDO1FBRTVELEtBQUssTUFBTSxPQUFPLElBQUksUUFBUSxFQUFFO1lBQzVCLElBQUksUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssRUFBRTtnQkFDekIsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQU0sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxPQUFPLENBQUMsQ0FBQztnQkFDM0UsSUFBSSxNQUFNLEVBQUU7b0JBQ1IsTUFBTSxDQUFDLEtBQUssR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxDQUFDO2lCQUMxQzthQUNKO1NBQ0o7UUFFRCxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFO1lBQzFCLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7U0FDekM7SUFDTCxDQUFDO0lBRUQsU0FBUztRQUNMLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDM0IsQ0FBQzs7d0dBdkNRLFdBQVcsOENBVVIsZUFBZTs0RkFWbEIsV0FBVyx1R0FDVCxrQkFBa0IsMEhBRWEsZ0JBQWdCLDZCQ3RCOUQsZ3hEQW9EQTsyRkRqQ2EsV0FBVztrQkFMdkIsU0FBUzsrQkFDSSxhQUFhOzswQkFjbEIsTUFBTTsyQkFBQyxlQUFlO21GQVRJLGtCQUFrQjtzQkFBaEQsU0FBUzt1QkFBQyxrQkFBa0I7Z0JBRzdCLEtBQUs7c0JBREosU0FBUzt1QkFBQyxxQkFBcUIsRUFBRSxFQUFFLElBQUksRUFBRSxnQkFBZ0IsRUFBRSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgQWZ0ZXJWaWV3SW5pdCxcbiAgICBDb21wb25lbnQsXG4gICAgQ29tcG9uZW50RmFjdG9yeSxcbiAgICBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXG4gICAgQ29tcG9uZW50UmVmLFxuICAgIEluamVjdCxcbiAgICBWaWV3Q2hpbGQsXG4gICAgVmlld0NvbnRhaW5lclJlZixcbn0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcbmltcG9ydCB7IE1hdERpYWxvZ1JlZiwgTUFUX0RJQUxPR19EQVRBIH0gZnJvbSBcIkBhbmd1bGFyL21hdGVyaWFsL2RpYWxvZ1wiO1xuaW1wb3J0IHsgU21hcnRmb3JtQ29tcG9uZW50IH0gZnJvbSBcIkBzbWFydGJpdDRhbGwvZm9ybVwiO1xuaW1wb3J0IHsgU21hcnREaWFsb2dEYXRhIH0gZnJvbSBcIi4vc21hcnRkaWFsb2cubW9kZWxcIjtcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6IFwic21hcnRkaWFsb2dcIixcbiAgICB0ZW1wbGF0ZVVybDogXCIuL3NtYXJ0ZGlhbG9nLmNvbXBvbmVudC5odG1sXCIsXG4gICAgc3R5bGVVcmxzOiBbXCIuL3NtYXJ0ZGlhbG9nLmNvbXBvbmVudC5jc3NcIl0sXG59KVxuZXhwb3J0IGNsYXNzIFNtYXJ0RGlhbG9nIGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCB7XG4gICAgQFZpZXdDaGlsZChTbWFydGZvcm1Db21wb25lbnQpIHNtYXJ0Rm9ybUNvbXBvbmVudCE6IFNtYXJ0Zm9ybUNvbXBvbmVudDtcblxuICAgIEBWaWV3Q2hpbGQoXCJyZW5kZXJDb21wb25lbnRIZXJlXCIsIHsgcmVhZDogVmlld0NvbnRhaW5lclJlZiB9KVxuICAgIHZjUmVmPzogVmlld0NvbnRhaW5lclJlZjtcblxuICAgIGNvbXBvbmVudFJlZj86IENvbXBvbmVudFJlZjxhbnk+O1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBkaWFsb2dSZWY6IE1hdERpYWxvZ1JlZjxTbWFydERpYWxvZz4sXG4gICAgICAgIEBJbmplY3QoTUFUX0RJQUxPR19EQVRBKSBwdWJsaWMgZGF0YTogU21hcnREaWFsb2dEYXRhLFxuICAgICAgICBwcml2YXRlIHJlc29sdmVyOiBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXJcbiAgICApIHt9XG5cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIGNvbnN0IGZhY3RvcnkgPSB0aGlzLnJlc29sdmVyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KHRoaXMuZGF0YS5jdXN0b21Db21wb25lbnQpO1xuICAgICAgICBjb25zdCByZWYgPSB0aGlzLnZjUmVmIS5jcmVhdGVDb21wb25lbnQoZmFjdG9yeSk7XG4gICAgICAgIHJlZi5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgfVxuXG4gICAgb25BY3Rpb25DbGljaygpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgY29udHJvbHMgPSB0aGlzLnNtYXJ0Rm9ybUNvbXBvbmVudC5nZXRGb3JtKCkuY29udHJvbHM7XG5cbiAgICAgICAgZm9yIChjb25zdCBjb250cm9sIGluIGNvbnRyb2xzKSB7XG4gICAgICAgICAgICBpZiAoY29udHJvbHNbY29udHJvbF0udmFsaWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB3aWRnZXQgPSB0aGlzLmRhdGEuZm9ybSEud2lkZ2V0cy5maW5kKChrOiBhbnkpID0+IGsua2V5ID09PSBjb250cm9sKTtcbiAgICAgICAgICAgICAgICBpZiAod2lkZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHdpZGdldC52YWx1ZSA9IGNvbnRyb2xzW2NvbnRyb2xdLnZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmRhdGEuYWN0aW9uQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YS5hY3Rpb25DYWxsYmFjayhbdGhpcy5kYXRhXSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbk5vQ2xpY2soKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZGlhbG9nUmVmLmNsb3NlKCk7XG4gICAgfVxufVxuIiwiPGRpdlxuICAgIGNsYXNzPVwiZGlhbG9nLWNvbnRhaW5lclwiXG4gICAgW25nQ2xhc3NdPVwiZGF0YS5zaXplLmZ1bGxTY3JlZW4gPyAnZnVsbFNjcmVlbicgOiAnJ1wiXG4gICAgW25nU3R5bGVdPVwieyB3aWR0aDogZGF0YS5zaXplLndpZHRoICsgJ3B4JywgaGVpZ2h0OiBkYXRhLnNpemUuaGVpZ2h0ICsgJ3B4JyB9XCJcbj5cbiAgICA8ZGl2IGNsYXNzPVwiZGlhbG9nLXRpdGxlLWNvbnRhaW5lclwiIG1hdC1kaWFsb2ctdGl0bGU+XG4gICAgICAgIDxoMSBjbGFzcz1cImRpYWxvZy10aXRsZVwiPlxuICAgICAgICAgICAge3sgZGF0YS5jb250ZW50LnRpdGxlIH19XG4gICAgICAgIDwvaDE+XG4gICAgICAgIDxidXR0b24gbWF0LWljb24tYnV0dG9uIFttYXQtZGlhbG9nLWNsb3NlXT1cIlwiPlxuICAgICAgICAgICAgPG1hdC1pY29uIGFyaWEtaGlkZGVuPVwiZmFsc2VcIiBhcmlhLWxhYmVsPVwiRXhhbXBsZSBob21lIGljb25cIj5jbG9zZTwvbWF0LWljb24+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgKm5nSWY9XCIhZGF0YS5jdXN0b21Db21wb25lbnRcIiBtYXQtZGlhbG9nLWNvbnRlbnQgY2xhc3M9XCJjb250ZW50XCI+XG4gICAgICAgIDxwPlxuICAgICAgICAgICAge3sgZGF0YS5jb250ZW50LmRlc2NyaXB0aW9uIH19XG4gICAgICAgIDwvcD5cbiAgICAgICAgPHNtYXJ0Zm9ybSAqbmdJZj1cImRhdGEuZm9ybVwiIFtzbWFydEZvcm1dPVwiZGF0YS5mb3JtIVwiPjwvc21hcnRmb3JtPlxuICAgICAgICA8c21hcnR0YWJsZSAqbmdJZj1cImRhdGEudGFibGVcIiBbc21hcnRUYWJsZV09XCJkYXRhLnRhYmxlIVwiPjwvc21hcnR0YWJsZT5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2ICpuZ0lmPVwiIWRhdGEuY3VzdG9tQ29tcG9uZW50XCIgY2xhc3M9XCJhY3Rpb24tY29udGFpbmVyXCIgbWF0LWRpYWxvZy1hY3Rpb25zPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBjbGFzcz1cImFjdGlvbi1idXR0b25cIlxuICAgICAgICAgICAgKm5nSWY9XCJkYXRhLmNhbmNlbENhbGxiYWNrXCJcbiAgICAgICAgICAgIG1hdC1idXR0b25cbiAgICAgICAgICAgIChjbGljayk9XCIoZGF0YS5jYW5jZWxDYWxsYmFjaylcIlxuICAgICAgICA+XG4gICAgICAgICAgICBDYW5jZWxcbiAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIGNsYXNzPVwiYWN0aW9uLWJ1dHRvblwiXG4gICAgICAgICAgICAqbmdJZj1cImRhdGEub2tDYWxsYmFja1wiXG4gICAgICAgICAgICBtYXQtYnV0dG9uXG4gICAgICAgICAgICAoY2xpY2spPVwiKGRhdGEub2tDYWxsYmFjaylcIlxuICAgICAgICAgICAgY2RrRm9jdXNJbml0aWFsXG4gICAgICAgID5cbiAgICAgICAgICAgIE9rXG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBjbGFzcz1cImFjdGlvbi1idXR0b25cIlxuICAgICAgICAgICAgKm5nSWY9XCJkYXRhLmFjdGlvbkNhbGxiYWNrXCJcbiAgICAgICAgICAgIG1hdC1yYWlzZWQtYnV0dG9uXG4gICAgICAgICAgICAoY2xpY2spPVwib25BY3Rpb25DbGljaygpXCJcbiAgICAgICAgPlxuICAgICAgICAgICAge3sgZGF0YS5hY3Rpb25MYWJlbCB9fVxuICAgICAgICA8L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgICA8bWF0LWRpYWxvZy1jb250ZW50PlxuICAgICAgICA8bmctdGVtcGxhdGUgI3JlbmRlckNvbXBvbmVudEhlcmU+PC9uZy10ZW1wbGF0ZT5cbiAgICA8L21hdC1kaWFsb2ctY29udGVudD5cbiAgICA8ZGl2ICpuZ0lmPVwiZGF0YS5jdXN0b21Db21wb25lbnRcIj48L2Rpdj5cbjwvZGl2PlxuIl19