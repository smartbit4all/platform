import { Component, Input } from '@angular/core';
import { SmartTableType } from './smarttable.model';
import * as i0 from "@angular/core";
import * as i1 from "@angular/material/table";
import * as i2 from "@angular/material/icon";
import * as i3 from "@angular/material/button";
import * as i4 from "@angular/material/menu";
import * as i5 from "@angular/material/checkbox";
import * as i6 from "@angular/common";
export class SmarttableComponent {
    constructor() {
        this.tableType = SmartTableType;
    }
    ngOnInit() { }
    isAllSelected() {
        const numSelected = this.smartTable.selection.selected.length;
        const numRows = this.smartTable.tableRows.length;
        return numSelected === numRows;
    }
    /** Selects all rows if they are not all selected; otherwise clear selection. */
    toggleAllRows() {
        if (this.isAllSelected()) {
            this.smartTable.selection.clear();
            return;
        }
        this.smartTable.selection.select(...this.smartTable.tableRows);
    }
    /** The label for the checkbox on the passed row */
    checkboxLabel(row) {
        if (!row) {
            return `${this.isAllSelected() ? 'deselect' : 'select'} all`;
        }
        return `${this.smartTable.selection.isSelected(row) ? 'deselect' : 'select'} row ${row.position + 1}`;
    }
}
SmarttableComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.2.7", ngImport: i0, type: SmarttableComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });
SmarttableComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.2.7", type: SmarttableComponent, selector: "smarttable", inputs: { smartTable: "smartTable" }, ngImport: i0, template: "<table mat-table [dataSource]=\"smartTable.tableRows\" class=\"full-width\">\r\n  <!--- Note that these columns can be defined in any order.\r\n            The actual rendered columns are set as a property on the row definition\" -->\r\n\r\n  <!-- Column Descriptor -->\r\n  <div *ngIf=\"smartTable.tableType === tableType.INHERITED\">\r\n    <ng-container\r\n      *ngFor=\"let header of smartTable.tableHeaders; let i = index\"\r\n      matColumnDef=\"{{ header }}\"\r\n    >\r\n      <th mat-header-cell *matHeaderCellDef>\r\n        <div\r\n          *ngIf=\"\r\n            header === 'icon' ||\r\n            header === 'img' ||\r\n            header === 'options' ||\r\n            header === 'button'\r\n          \"\r\n        ></div>\r\n        <div\r\n          *ngIf=\"\r\n            header !== 'icon' &&\r\n            header !== 'img' &&\r\n            header !== 'options' &&\r\n            header !== 'button'\r\n          \"\r\n        >\r\n          {{ smartTable.customTableHeaders[i] }}\r\n        </div>\r\n      </th>\r\n      <td mat-cell *matCellDef=\"let element\">\r\n        <mat-icon *ngIf=\"header === 'icon'\"> {{ element[header] }} </mat-icon>\r\n        <img\r\n          *ngIf=\"header === 'img'\"\r\n          [src]=\"element[header]\"\r\n          alt=\"\"\r\n          class=\"smarttableImg\"\r\n        />\r\n        <div *ngIf=\"header === 'options'\">\r\n          <button\r\n            mat-icon-button\r\n            [matMenuTriggerFor]=\"menu\"\r\n            aria-label=\"options\"\r\n          >\r\n            <mat-icon>more_vert</mat-icon>\r\n          </button>\r\n          <mat-menu #menu=\"matMenu\">\r\n            <button\r\n              *ngFor=\"let option of smartTable.options\"\r\n              mat-menu-item\r\n              (click)=\"option.callback(element)\"\r\n            >\r\n              <mat-icon *ngIf=\"option.icon\">\r\n                {{ option.icon }}\r\n              </mat-icon>\r\n              <span>\r\n                {{ option.label }}\r\n              </span>\r\n            </button>\r\n          </mat-menu>\r\n        </div>\r\n        <div\r\n          *ngIf=\"\r\n            header !== 'icon' &&\r\n            header !== 'img' &&\r\n            header !== 'option' &&\r\n            header !== 'button'\r\n          \"\r\n        >\r\n          {{ element[header] }}\r\n        </div>\r\n        <div *ngIf=\"header === 'button'\">\r\n          <button (click)=\"element[header].onClick()\" mat-raised-button>\r\n            {{ element[header].label }}\r\n            <mat-icon>{{ element[header].icon }}</mat-icon>\r\n          </button>\r\n        </div>\r\n      </td>\r\n    </ng-container>\r\n\r\n    <tr\r\n      mat-header-row\r\n      *matHeaderRowDef=\"smartTable.tableHeaders; sticky: true\"\r\n    ></tr>\r\n    <tr mat-row *matRowDef=\"let row; columns: smartTable.tableHeaders\"></tr>\r\n  </div>\r\n  <div *ngIf=\"smartTable.tableType !== tableType.INHERITED\">\r\n    <!-- Checkbox Column -->\r\n    <ng-container matColumnDef=\"select\">\r\n      <th mat-header-cell *matHeaderCellDef>\r\n        <mat-checkbox\r\n          (change)=\"$event ? toggleAllRows() : null\"\r\n          [checked]=\"smartTable.selection!.hasValue() && isAllSelected()\"\r\n          [indeterminate]=\"smartTable.selection!.hasValue() && !isAllSelected()\"\r\n          [aria-label]=\"checkboxLabel()\"\r\n        >\r\n        </mat-checkbox>\r\n      </th>\r\n      <td mat-cell *matCellDef=\"let row\">\r\n        <mat-checkbox\r\n          (click)=\"$event.stopPropagation()\"\r\n          (change)=\"$event ? smartTable.selection!.toggle(row) : null\"\r\n          [checked]=\"smartTable.selection!.isSelected(row)\"\r\n          [aria-label]=\"checkboxLabel(row)\"\r\n        >\r\n        </mat-checkbox>\r\n      </td>\r\n    </ng-container>\r\n\r\n    <!-- Column Descriptor -->\r\n    <div *ngFor=\"let header of smartTable.tableHeaders; let i = index\">\r\n      <ng-container *ngIf=\"header !== 'select'\" matColumnDef=\"{{ header }}\">\r\n        <th mat-header-cell *matHeaderCellDef>\r\n          <div\r\n            *ngIf=\"\r\n              header === 'icon' || header === 'img' || header === 'options'\r\n            \"\r\n          ></div>\r\n          <div\r\n            *ngIf=\"\r\n              header !== 'icon' && header !== 'img' && header !== 'options'\r\n            \"\r\n          >\r\n            {{ smartTable.customTableHeaders[i] }}\r\n          </div>\r\n        </th>\r\n        <td mat-cell *matCellDef=\"let element\">\r\n          <mat-icon *ngIf=\"header === 'icon'\"> {{ element[header] }} </mat-icon>\r\n          <img\r\n            *ngIf=\"header === 'img'\"\r\n            [src]=\"element[header]\"\r\n            alt=\"\"\r\n            class=\"smarttableImg\"\r\n          />\r\n          <div *ngIf=\"header === 'options'\">\r\n            <button\r\n              mat-icon-button\r\n              [matMenuTriggerFor]=\"menu\"\r\n              aria-label=\"options\"\r\n            >\r\n              <mat-icon>more_vert</mat-icon>\r\n            </button>\r\n            <mat-menu #menu=\"matMenu\">\r\n              <button\r\n                *ngFor=\"let option of smartTable.options\"\r\n                mat-menu-item\r\n                (click)=\"option.callback(element)\"\r\n              >\r\n                <mat-icon *ngIf=\"option.icon\">\r\n                  {{ option.icon }}\r\n                </mat-icon>\r\n                <span>\r\n                  {{ option.label }}\r\n                </span>\r\n              </button>\r\n            </mat-menu>\r\n          </div>\r\n          <div *ngIf=\"header !== 'icon' && header !== 'img'\">\r\n            {{ element[header] }}\r\n          </div>\r\n        </td>\r\n        <!-- <td mat-cell *matCellDef=\"let element\">{{ element[header] }}</td> -->\r\n      </ng-container>\r\n    </div>\r\n\r\n    <tr mat-header-row *matHeaderRowDef=\"smartTable.tableHeaders\"></tr>\r\n    <tr\r\n      mat-row\r\n      *matRowDef=\"let row; columns: smartTable.tableHeaders\"\r\n      (click)=\"smartTable.selection!.toggle(row)\"\r\n    ></tr>\r\n  </div>\r\n</table>\r\n", styles: [".full-width{width:100%}.smarttableImg{width:25px}\n"], components: [{ type: i1.MatTable, selector: "mat-table, table[mat-table]", exportAs: ["matTable"] }, { type: i2.MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { type: i3.MatButton, selector: "button[mat-button], button[mat-raised-button], button[mat-icon-button],             button[mat-fab], button[mat-mini-fab], button[mat-stroked-button],             button[mat-flat-button]", inputs: ["disabled", "disableRipple", "color"], exportAs: ["matButton"] }, { type: i4.MatMenu, selector: "mat-menu", exportAs: ["matMenu"] }, { type: i4.MatMenuItem, selector: "[mat-menu-item]", inputs: ["disabled", "disableRipple", "role"], exportAs: ["matMenuItem"] }, { type: i1.MatHeaderRow, selector: "mat-header-row, tr[mat-header-row]", exportAs: ["matHeaderRow"] }, { type: i1.MatRow, selector: "mat-row, tr[mat-row]", exportAs: ["matRow"] }, { type: i5.MatCheckbox, selector: "mat-checkbox", inputs: ["disableRipple", "color", "tabIndex", "aria-label", "aria-labelledby", "aria-describedby", "id", "required", "labelPosition", "name", "value", "checked", "disabled", "indeterminate"], outputs: ["change", "indeterminateChange"], exportAs: ["matCheckbox"] }], directives: [{ type: i6.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i6.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { type: i1.MatColumnDef, selector: "[matColumnDef]", inputs: ["sticky", "matColumnDef"] }, { type: i1.MatHeaderCellDef, selector: "[matHeaderCellDef]" }, { type: i1.MatHeaderCell, selector: "mat-header-cell, th[mat-header-cell]" }, { type: i1.MatCellDef, selector: "[matCellDef]" }, { type: i1.MatCell, selector: "mat-cell, td[mat-cell]" }, { type: i4.MatMenuTrigger, selector: "[mat-menu-trigger-for], [matMenuTriggerFor]", exportAs: ["matMenuTrigger"] }, { type: i1.MatHeaderRowDef, selector: "[matHeaderRowDef]", inputs: ["matHeaderRowDef", "matHeaderRowDefSticky"] }, { type: i1.MatRowDef, selector: "[matRowDef]", inputs: ["matRowDefColumns", "matRowDefWhen"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.2.7", ngImport: i0, type: SmarttableComponent, decorators: [{
            type: Component,
            args: [{ selector: 'smarttable', template: "<table mat-table [dataSource]=\"smartTable.tableRows\" class=\"full-width\">\r\n  <!--- Note that these columns can be defined in any order.\r\n            The actual rendered columns are set as a property on the row definition\" -->\r\n\r\n  <!-- Column Descriptor -->\r\n  <div *ngIf=\"smartTable.tableType === tableType.INHERITED\">\r\n    <ng-container\r\n      *ngFor=\"let header of smartTable.tableHeaders; let i = index\"\r\n      matColumnDef=\"{{ header }}\"\r\n    >\r\n      <th mat-header-cell *matHeaderCellDef>\r\n        <div\r\n          *ngIf=\"\r\n            header === 'icon' ||\r\n            header === 'img' ||\r\n            header === 'options' ||\r\n            header === 'button'\r\n          \"\r\n        ></div>\r\n        <div\r\n          *ngIf=\"\r\n            header !== 'icon' &&\r\n            header !== 'img' &&\r\n            header !== 'options' &&\r\n            header !== 'button'\r\n          \"\r\n        >\r\n          {{ smartTable.customTableHeaders[i] }}\r\n        </div>\r\n      </th>\r\n      <td mat-cell *matCellDef=\"let element\">\r\n        <mat-icon *ngIf=\"header === 'icon'\"> {{ element[header] }} </mat-icon>\r\n        <img\r\n          *ngIf=\"header === 'img'\"\r\n          [src]=\"element[header]\"\r\n          alt=\"\"\r\n          class=\"smarttableImg\"\r\n        />\r\n        <div *ngIf=\"header === 'options'\">\r\n          <button\r\n            mat-icon-button\r\n            [matMenuTriggerFor]=\"menu\"\r\n            aria-label=\"options\"\r\n          >\r\n            <mat-icon>more_vert</mat-icon>\r\n          </button>\r\n          <mat-menu #menu=\"matMenu\">\r\n            <button\r\n              *ngFor=\"let option of smartTable.options\"\r\n              mat-menu-item\r\n              (click)=\"option.callback(element)\"\r\n            >\r\n              <mat-icon *ngIf=\"option.icon\">\r\n                {{ option.icon }}\r\n              </mat-icon>\r\n              <span>\r\n                {{ option.label }}\r\n              </span>\r\n            </button>\r\n          </mat-menu>\r\n        </div>\r\n        <div\r\n          *ngIf=\"\r\n            header !== 'icon' &&\r\n            header !== 'img' &&\r\n            header !== 'option' &&\r\n            header !== 'button'\r\n          \"\r\n        >\r\n          {{ element[header] }}\r\n        </div>\r\n        <div *ngIf=\"header === 'button'\">\r\n          <button (click)=\"element[header].onClick()\" mat-raised-button>\r\n            {{ element[header].label }}\r\n            <mat-icon>{{ element[header].icon }}</mat-icon>\r\n          </button>\r\n        </div>\r\n      </td>\r\n    </ng-container>\r\n\r\n    <tr\r\n      mat-header-row\r\n      *matHeaderRowDef=\"smartTable.tableHeaders; sticky: true\"\r\n    ></tr>\r\n    <tr mat-row *matRowDef=\"let row; columns: smartTable.tableHeaders\"></tr>\r\n  </div>\r\n  <div *ngIf=\"smartTable.tableType !== tableType.INHERITED\">\r\n    <!-- Checkbox Column -->\r\n    <ng-container matColumnDef=\"select\">\r\n      <th mat-header-cell *matHeaderCellDef>\r\n        <mat-checkbox\r\n          (change)=\"$event ? toggleAllRows() : null\"\r\n          [checked]=\"smartTable.selection!.hasValue() && isAllSelected()\"\r\n          [indeterminate]=\"smartTable.selection!.hasValue() && !isAllSelected()\"\r\n          [aria-label]=\"checkboxLabel()\"\r\n        >\r\n        </mat-checkbox>\r\n      </th>\r\n      <td mat-cell *matCellDef=\"let row\">\r\n        <mat-checkbox\r\n          (click)=\"$event.stopPropagation()\"\r\n          (change)=\"$event ? smartTable.selection!.toggle(row) : null\"\r\n          [checked]=\"smartTable.selection!.isSelected(row)\"\r\n          [aria-label]=\"checkboxLabel(row)\"\r\n        >\r\n        </mat-checkbox>\r\n      </td>\r\n    </ng-container>\r\n\r\n    <!-- Column Descriptor -->\r\n    <div *ngFor=\"let header of smartTable.tableHeaders; let i = index\">\r\n      <ng-container *ngIf=\"header !== 'select'\" matColumnDef=\"{{ header }}\">\r\n        <th mat-header-cell *matHeaderCellDef>\r\n          <div\r\n            *ngIf=\"\r\n              header === 'icon' || header === 'img' || header === 'options'\r\n            \"\r\n          ></div>\r\n          <div\r\n            *ngIf=\"\r\n              header !== 'icon' && header !== 'img' && header !== 'options'\r\n            \"\r\n          >\r\n            {{ smartTable.customTableHeaders[i] }}\r\n          </div>\r\n        </th>\r\n        <td mat-cell *matCellDef=\"let element\">\r\n          <mat-icon *ngIf=\"header === 'icon'\"> {{ element[header] }} </mat-icon>\r\n          <img\r\n            *ngIf=\"header === 'img'\"\r\n            [src]=\"element[header]\"\r\n            alt=\"\"\r\n            class=\"smarttableImg\"\r\n          />\r\n          <div *ngIf=\"header === 'options'\">\r\n            <button\r\n              mat-icon-button\r\n              [matMenuTriggerFor]=\"menu\"\r\n              aria-label=\"options\"\r\n            >\r\n              <mat-icon>more_vert</mat-icon>\r\n            </button>\r\n            <mat-menu #menu=\"matMenu\">\r\n              <button\r\n                *ngFor=\"let option of smartTable.options\"\r\n                mat-menu-item\r\n                (click)=\"option.callback(element)\"\r\n              >\r\n                <mat-icon *ngIf=\"option.icon\">\r\n                  {{ option.icon }}\r\n                </mat-icon>\r\n                <span>\r\n                  {{ option.label }}\r\n                </span>\r\n              </button>\r\n            </mat-menu>\r\n          </div>\r\n          <div *ngIf=\"header !== 'icon' && header !== 'img'\">\r\n            {{ element[header] }}\r\n          </div>\r\n        </td>\r\n        <!-- <td mat-cell *matCellDef=\"let element\">{{ element[header] }}</td> -->\r\n      </ng-container>\r\n    </div>\r\n\r\n    <tr mat-header-row *matHeaderRowDef=\"smartTable.tableHeaders\"></tr>\r\n    <tr\r\n      mat-row\r\n      *matRowDef=\"let row; columns: smartTable.tableHeaders\"\r\n      (click)=\"smartTable.selection!.toggle(row)\"\r\n    ></tr>\r\n  </div>\r\n</table>\r\n", styles: [".full-width{width:100%}.smarttableImg{width:25px}\n"] }]
        }], ctorParameters: function () { return []; }, propDecorators: { smartTable: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic21hcnR0YWJsZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9zbWFydHRhYmxlL3NyYy9saWIvc21hcnR0YWJsZS5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi9wcm9qZWN0cy9zbWFydHRhYmxlL3NyYy9saWIvc21hcnR0YWJsZS5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBVSxNQUFNLGVBQWUsQ0FBQztBQUN6RCxPQUFPLEVBQWMsY0FBYyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7Ozs7Ozs7O0FBT2hFLE1BQU0sT0FBTyxtQkFBbUI7SUFJL0I7UUFGQSxjQUFTLEdBQUcsY0FBYyxDQUFDO0lBRVosQ0FBQztJQUVoQixRQUFRLEtBQVUsQ0FBQztJQUVuQixhQUFhO1FBQ1osTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFVLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQztRQUMvRCxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUM7UUFDakQsT0FBTyxXQUFXLEtBQUssT0FBTyxDQUFDO0lBQ2hDLENBQUM7SUFFRCxnRkFBZ0Y7SUFDaEYsYUFBYTtRQUNaLElBQUksSUFBSSxDQUFDLGFBQWEsRUFBRSxFQUFFO1lBQ3pCLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBVSxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ25DLE9BQU87U0FDUDtRQUVELElBQUksQ0FBQyxVQUFVLENBQUMsU0FBVSxDQUFDLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDakUsQ0FBQztJQUVELG1EQUFtRDtJQUNuRCxhQUFhLENBQUMsR0FBUztRQUN0QixJQUFJLENBQUMsR0FBRyxFQUFFO1lBQ1QsT0FBTyxHQUFHLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxRQUFRLE1BQU0sQ0FBQztTQUM3RDtRQUNELE9BQU8sR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVUsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsUUFBUSxRQUMzRSxHQUFHLENBQUMsUUFBUSxHQUFHLENBQ2hCLEVBQUUsQ0FBQztJQUNKLENBQUM7O2dIQWhDVyxtQkFBbUI7b0dBQW5CLG1CQUFtQix3RkNSaEMsMGdNQTZLQTsyRkRyS2EsbUJBQW1CO2tCQUwvQixTQUFTOytCQUNDLFlBQVk7MEVBS2IsVUFBVTtzQkFBbEIsS0FBSyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBTbWFydFRhYmxlLCBTbWFydFRhYmxlVHlwZSB9IGZyb20gJy4vc21hcnR0YWJsZS5tb2RlbCc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuXHRzZWxlY3RvcjogJ3NtYXJ0dGFibGUnLFxyXG5cdHRlbXBsYXRlVXJsOiAnLi9zbWFydHRhYmxlLmNvbXBvbmVudC5odG1sJyxcclxuXHRzdHlsZVVybHM6IFsnLi9zbWFydHRhYmxlLmNvbXBvbmVudC5jc3MnXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgU21hcnR0YWJsZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcblx0QElucHV0KCkgc21hcnRUYWJsZSE6IFNtYXJ0VGFibGU8YW55PjtcclxuXHR0YWJsZVR5cGUgPSBTbWFydFRhYmxlVHlwZTtcclxuXHJcblx0Y29uc3RydWN0b3IoKSB7fVxyXG5cclxuXHRuZ09uSW5pdCgpOiB2b2lkIHt9XHJcblxyXG5cdGlzQWxsU2VsZWN0ZWQoKSB7XHJcblx0XHRjb25zdCBudW1TZWxlY3RlZCA9IHRoaXMuc21hcnRUYWJsZS5zZWxlY3Rpb24hLnNlbGVjdGVkLmxlbmd0aDtcclxuXHRcdGNvbnN0IG51bVJvd3MgPSB0aGlzLnNtYXJ0VGFibGUudGFibGVSb3dzLmxlbmd0aDtcclxuXHRcdHJldHVybiBudW1TZWxlY3RlZCA9PT0gbnVtUm93cztcclxuXHR9XHJcblxyXG5cdC8qKiBTZWxlY3RzIGFsbCByb3dzIGlmIHRoZXkgYXJlIG5vdCBhbGwgc2VsZWN0ZWQ7IG90aGVyd2lzZSBjbGVhciBzZWxlY3Rpb24uICovXHJcblx0dG9nZ2xlQWxsUm93cygpIHtcclxuXHRcdGlmICh0aGlzLmlzQWxsU2VsZWN0ZWQoKSkge1xyXG5cdFx0XHR0aGlzLnNtYXJ0VGFibGUuc2VsZWN0aW9uIS5jbGVhcigpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5zbWFydFRhYmxlLnNlbGVjdGlvbiEuc2VsZWN0KC4uLnRoaXMuc21hcnRUYWJsZS50YWJsZVJvd3MpO1xyXG5cdH1cclxuXHJcblx0LyoqIFRoZSBsYWJlbCBmb3IgdGhlIGNoZWNrYm94IG9uIHRoZSBwYXNzZWQgcm93ICovXHJcblx0Y2hlY2tib3hMYWJlbChyb3c/OiBhbnkpOiBzdHJpbmcge1xyXG5cdFx0aWYgKCFyb3cpIHtcclxuXHRcdFx0cmV0dXJuIGAke3RoaXMuaXNBbGxTZWxlY3RlZCgpID8gJ2Rlc2VsZWN0JyA6ICdzZWxlY3QnfSBhbGxgO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGAke3RoaXMuc21hcnRUYWJsZS5zZWxlY3Rpb24hLmlzU2VsZWN0ZWQocm93KSA/ICdkZXNlbGVjdCcgOiAnc2VsZWN0J30gcm93ICR7XHJcblx0XHRcdHJvdy5wb3NpdGlvbiArIDFcclxuXHRcdH1gO1xyXG5cdH1cclxufVxyXG4iLCI8dGFibGUgbWF0LXRhYmxlIFtkYXRhU291cmNlXT1cInNtYXJ0VGFibGUudGFibGVSb3dzXCIgY2xhc3M9XCJmdWxsLXdpZHRoXCI+XHJcbiAgPCEtLS0gTm90ZSB0aGF0IHRoZXNlIGNvbHVtbnMgY2FuIGJlIGRlZmluZWQgaW4gYW55IG9yZGVyLlxyXG4gICAgICAgICAgICBUaGUgYWN0dWFsIHJlbmRlcmVkIGNvbHVtbnMgYXJlIHNldCBhcyBhIHByb3BlcnR5IG9uIHRoZSByb3cgZGVmaW5pdGlvblwiIC0tPlxyXG5cclxuICA8IS0tIENvbHVtbiBEZXNjcmlwdG9yIC0tPlxyXG4gIDxkaXYgKm5nSWY9XCJzbWFydFRhYmxlLnRhYmxlVHlwZSA9PT0gdGFibGVUeXBlLklOSEVSSVRFRFwiPlxyXG4gICAgPG5nLWNvbnRhaW5lclxyXG4gICAgICAqbmdGb3I9XCJsZXQgaGVhZGVyIG9mIHNtYXJ0VGFibGUudGFibGVIZWFkZXJzOyBsZXQgaSA9IGluZGV4XCJcclxuICAgICAgbWF0Q29sdW1uRGVmPVwie3sgaGVhZGVyIH19XCJcclxuICAgID5cclxuICAgICAgPHRoIG1hdC1oZWFkZXItY2VsbCAqbWF0SGVhZGVyQ2VsbERlZj5cclxuICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAqbmdJZj1cIlxyXG4gICAgICAgICAgICBoZWFkZXIgPT09ICdpY29uJyB8fFxyXG4gICAgICAgICAgICBoZWFkZXIgPT09ICdpbWcnIHx8XHJcbiAgICAgICAgICAgIGhlYWRlciA9PT0gJ29wdGlvbnMnIHx8XHJcbiAgICAgICAgICAgIGhlYWRlciA9PT0gJ2J1dHRvbidcclxuICAgICAgICAgIFwiXHJcbiAgICAgICAgPjwvZGl2PlxyXG4gICAgICAgIDxkaXZcclxuICAgICAgICAgICpuZ0lmPVwiXHJcbiAgICAgICAgICAgIGhlYWRlciAhPT0gJ2ljb24nICYmXHJcbiAgICAgICAgICAgIGhlYWRlciAhPT0gJ2ltZycgJiZcclxuICAgICAgICAgICAgaGVhZGVyICE9PSAnb3B0aW9ucycgJiZcclxuICAgICAgICAgICAgaGVhZGVyICE9PSAnYnV0dG9uJ1xyXG4gICAgICAgICAgXCJcclxuICAgICAgICA+XHJcbiAgICAgICAgICB7eyBzbWFydFRhYmxlLmN1c3RvbVRhYmxlSGVhZGVyc1tpXSB9fVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L3RoPlxyXG4gICAgICA8dGQgbWF0LWNlbGwgKm1hdENlbGxEZWY9XCJsZXQgZWxlbWVudFwiPlxyXG4gICAgICAgIDxtYXQtaWNvbiAqbmdJZj1cImhlYWRlciA9PT0gJ2ljb24nXCI+IHt7IGVsZW1lbnRbaGVhZGVyXSB9fSA8L21hdC1pY29uPlxyXG4gICAgICAgIDxpbWdcclxuICAgICAgICAgICpuZ0lmPVwiaGVhZGVyID09PSAnaW1nJ1wiXHJcbiAgICAgICAgICBbc3JjXT1cImVsZW1lbnRbaGVhZGVyXVwiXHJcbiAgICAgICAgICBhbHQ9XCJcIlxyXG4gICAgICAgICAgY2xhc3M9XCJzbWFydHRhYmxlSW1nXCJcclxuICAgICAgICAvPlxyXG4gICAgICAgIDxkaXYgKm5nSWY9XCJoZWFkZXIgPT09ICdvcHRpb25zJ1wiPlxyXG4gICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICBtYXQtaWNvbi1idXR0b25cclxuICAgICAgICAgICAgW21hdE1lbnVUcmlnZ2VyRm9yXT1cIm1lbnVcIlxyXG4gICAgICAgICAgICBhcmlhLWxhYmVsPVwib3B0aW9uc1wiXHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIDxtYXQtaWNvbj5tb3JlX3ZlcnQ8L21hdC1pY29uPlxyXG4gICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICA8bWF0LW1lbnUgI21lbnU9XCJtYXRNZW51XCI+XHJcbiAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAqbmdGb3I9XCJsZXQgb3B0aW9uIG9mIHNtYXJ0VGFibGUub3B0aW9uc1wiXHJcbiAgICAgICAgICAgICAgbWF0LW1lbnUtaXRlbVxyXG4gICAgICAgICAgICAgIChjbGljayk9XCJvcHRpb24uY2FsbGJhY2soZWxlbWVudClcIlxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgPG1hdC1pY29uICpuZ0lmPVwib3B0aW9uLmljb25cIj5cclxuICAgICAgICAgICAgICAgIHt7IG9wdGlvbi5pY29uIH19XHJcbiAgICAgICAgICAgICAgPC9tYXQtaWNvbj5cclxuICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgIHt7IG9wdGlvbi5sYWJlbCB9fVxyXG4gICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICA8L21hdC1tZW51PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXZcclxuICAgICAgICAgICpuZ0lmPVwiXHJcbiAgICAgICAgICAgIGhlYWRlciAhPT0gJ2ljb24nICYmXHJcbiAgICAgICAgICAgIGhlYWRlciAhPT0gJ2ltZycgJiZcclxuICAgICAgICAgICAgaGVhZGVyICE9PSAnb3B0aW9uJyAmJlxyXG4gICAgICAgICAgICBoZWFkZXIgIT09ICdidXR0b24nXHJcbiAgICAgICAgICBcIlxyXG4gICAgICAgID5cclxuICAgICAgICAgIHt7IGVsZW1lbnRbaGVhZGVyXSB9fVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgKm5nSWY9XCJoZWFkZXIgPT09ICdidXR0b24nXCI+XHJcbiAgICAgICAgICA8YnV0dG9uIChjbGljayk9XCJlbGVtZW50W2hlYWRlcl0ub25DbGljaygpXCIgbWF0LXJhaXNlZC1idXR0b24+XHJcbiAgICAgICAgICAgIHt7IGVsZW1lbnRbaGVhZGVyXS5sYWJlbCB9fVxyXG4gICAgICAgICAgICA8bWF0LWljb24+e3sgZWxlbWVudFtoZWFkZXJdLmljb24gfX08L21hdC1pY29uPlxyXG4gICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvdGQ+XHJcbiAgICA8L25nLWNvbnRhaW5lcj5cclxuXHJcbiAgICA8dHJcclxuICAgICAgbWF0LWhlYWRlci1yb3dcclxuICAgICAgKm1hdEhlYWRlclJvd0RlZj1cInNtYXJ0VGFibGUudGFibGVIZWFkZXJzOyBzdGlja3k6IHRydWVcIlxyXG4gICAgPjwvdHI+XHJcbiAgICA8dHIgbWF0LXJvdyAqbWF0Um93RGVmPVwibGV0IHJvdzsgY29sdW1uczogc21hcnRUYWJsZS50YWJsZUhlYWRlcnNcIj48L3RyPlxyXG4gIDwvZGl2PlxyXG4gIDxkaXYgKm5nSWY9XCJzbWFydFRhYmxlLnRhYmxlVHlwZSAhPT0gdGFibGVUeXBlLklOSEVSSVRFRFwiPlxyXG4gICAgPCEtLSBDaGVja2JveCBDb2x1bW4gLS0+XHJcbiAgICA8bmctY29udGFpbmVyIG1hdENvbHVtbkRlZj1cInNlbGVjdFwiPlxyXG4gICAgICA8dGggbWF0LWhlYWRlci1jZWxsICptYXRIZWFkZXJDZWxsRGVmPlxyXG4gICAgICAgIDxtYXQtY2hlY2tib3hcclxuICAgICAgICAgIChjaGFuZ2UpPVwiJGV2ZW50ID8gdG9nZ2xlQWxsUm93cygpIDogbnVsbFwiXHJcbiAgICAgICAgICBbY2hlY2tlZF09XCJzbWFydFRhYmxlLnNlbGVjdGlvbiEuaGFzVmFsdWUoKSAmJiBpc0FsbFNlbGVjdGVkKClcIlxyXG4gICAgICAgICAgW2luZGV0ZXJtaW5hdGVdPVwic21hcnRUYWJsZS5zZWxlY3Rpb24hLmhhc1ZhbHVlKCkgJiYgIWlzQWxsU2VsZWN0ZWQoKVwiXHJcbiAgICAgICAgICBbYXJpYS1sYWJlbF09XCJjaGVja2JveExhYmVsKClcIlxyXG4gICAgICAgID5cclxuICAgICAgICA8L21hdC1jaGVja2JveD5cclxuICAgICAgPC90aD5cclxuICAgICAgPHRkIG1hdC1jZWxsICptYXRDZWxsRGVmPVwibGV0IHJvd1wiPlxyXG4gICAgICAgIDxtYXQtY2hlY2tib3hcclxuICAgICAgICAgIChjbGljayk9XCIkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcIlxyXG4gICAgICAgICAgKGNoYW5nZSk9XCIkZXZlbnQgPyBzbWFydFRhYmxlLnNlbGVjdGlvbiEudG9nZ2xlKHJvdykgOiBudWxsXCJcclxuICAgICAgICAgIFtjaGVja2VkXT1cInNtYXJ0VGFibGUuc2VsZWN0aW9uIS5pc1NlbGVjdGVkKHJvdylcIlxyXG4gICAgICAgICAgW2FyaWEtbGFiZWxdPVwiY2hlY2tib3hMYWJlbChyb3cpXCJcclxuICAgICAgICA+XHJcbiAgICAgICAgPC9tYXQtY2hlY2tib3g+XHJcbiAgICAgIDwvdGQ+XHJcbiAgICA8L25nLWNvbnRhaW5lcj5cclxuXHJcbiAgICA8IS0tIENvbHVtbiBEZXNjcmlwdG9yIC0tPlxyXG4gICAgPGRpdiAqbmdGb3I9XCJsZXQgaGVhZGVyIG9mIHNtYXJ0VGFibGUudGFibGVIZWFkZXJzOyBsZXQgaSA9IGluZGV4XCI+XHJcbiAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJoZWFkZXIgIT09ICdzZWxlY3QnXCIgbWF0Q29sdW1uRGVmPVwie3sgaGVhZGVyIH19XCI+XHJcbiAgICAgICAgPHRoIG1hdC1oZWFkZXItY2VsbCAqbWF0SGVhZGVyQ2VsbERlZj5cclxuICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgKm5nSWY9XCJcclxuICAgICAgICAgICAgICBoZWFkZXIgPT09ICdpY29uJyB8fCBoZWFkZXIgPT09ICdpbWcnIHx8IGhlYWRlciA9PT0gJ29wdGlvbnMnXHJcbiAgICAgICAgICAgIFwiXHJcbiAgICAgICAgICA+PC9kaXY+XHJcbiAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICpuZ0lmPVwiXHJcbiAgICAgICAgICAgICAgaGVhZGVyICE9PSAnaWNvbicgJiYgaGVhZGVyICE9PSAnaW1nJyAmJiBoZWFkZXIgIT09ICdvcHRpb25zJ1xyXG4gICAgICAgICAgICBcIlxyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgICB7eyBzbWFydFRhYmxlLmN1c3RvbVRhYmxlSGVhZGVyc1tpXSB9fVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC90aD5cclxuICAgICAgICA8dGQgbWF0LWNlbGwgKm1hdENlbGxEZWY9XCJsZXQgZWxlbWVudFwiPlxyXG4gICAgICAgICAgPG1hdC1pY29uICpuZ0lmPVwiaGVhZGVyID09PSAnaWNvbidcIj4ge3sgZWxlbWVudFtoZWFkZXJdIH19IDwvbWF0LWljb24+XHJcbiAgICAgICAgICA8aW1nXHJcbiAgICAgICAgICAgICpuZ0lmPVwiaGVhZGVyID09PSAnaW1nJ1wiXHJcbiAgICAgICAgICAgIFtzcmNdPVwiZWxlbWVudFtoZWFkZXJdXCJcclxuICAgICAgICAgICAgYWx0PVwiXCJcclxuICAgICAgICAgICAgY2xhc3M9XCJzbWFydHRhYmxlSW1nXCJcclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgICA8ZGl2ICpuZ0lmPVwiaGVhZGVyID09PSAnb3B0aW9ucydcIj5cclxuICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgIG1hdC1pY29uLWJ1dHRvblxyXG4gICAgICAgICAgICAgIFttYXRNZW51VHJpZ2dlckZvcl09XCJtZW51XCJcclxuICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwib3B0aW9uc1wiXHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICA8bWF0LWljb24+bW9yZV92ZXJ0PC9tYXQtaWNvbj5cclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgIDxtYXQtbWVudSAjbWVudT1cIm1hdE1lbnVcIj5cclxuICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAqbmdGb3I9XCJsZXQgb3B0aW9uIG9mIHNtYXJ0VGFibGUub3B0aW9uc1wiXHJcbiAgICAgICAgICAgICAgICBtYXQtbWVudS1pdGVtXHJcbiAgICAgICAgICAgICAgICAoY2xpY2spPVwib3B0aW9uLmNhbGxiYWNrKGVsZW1lbnQpXCJcclxuICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8bWF0LWljb24gKm5nSWY9XCJvcHRpb24uaWNvblwiPlxyXG4gICAgICAgICAgICAgICAgICB7eyBvcHRpb24uaWNvbiB9fVxyXG4gICAgICAgICAgICAgICAgPC9tYXQtaWNvbj5cclxuICAgICAgICAgICAgICAgIDxzcGFuPlxyXG4gICAgICAgICAgICAgICAgICB7eyBvcHRpb24ubGFiZWwgfX1cclxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgPC9tYXQtbWVudT5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiAqbmdJZj1cImhlYWRlciAhPT0gJ2ljb24nICYmIGhlYWRlciAhPT0gJ2ltZydcIj5cclxuICAgICAgICAgICAge3sgZWxlbWVudFtoZWFkZXJdIH19XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L3RkPlxyXG4gICAgICAgIDwhLS0gPHRkIG1hdC1jZWxsICptYXRDZWxsRGVmPVwibGV0IGVsZW1lbnRcIj57eyBlbGVtZW50W2hlYWRlcl0gfX08L3RkPiAtLT5cclxuICAgICAgPC9uZy1jb250YWluZXI+XHJcbiAgICA8L2Rpdj5cclxuXHJcbiAgICA8dHIgbWF0LWhlYWRlci1yb3cgKm1hdEhlYWRlclJvd0RlZj1cInNtYXJ0VGFibGUudGFibGVIZWFkZXJzXCI+PC90cj5cclxuICAgIDx0clxyXG4gICAgICBtYXQtcm93XHJcbiAgICAgICptYXRSb3dEZWY9XCJsZXQgcm93OyBjb2x1bW5zOiBzbWFydFRhYmxlLnRhYmxlSGVhZGVyc1wiXHJcbiAgICAgIChjbGljayk9XCJzbWFydFRhYmxlLnNlbGVjdGlvbiEudG9nZ2xlKHJvdylcIlxyXG4gICAgPjwvdHI+XHJcbiAgPC9kaXY+XHJcbjwvdGFibGU+XHJcbiJdfQ==