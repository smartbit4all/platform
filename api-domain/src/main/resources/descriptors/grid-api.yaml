openapi: 3.0.1
info:
  title: Grid api
  description: |
    The grid api is resposible for the grid components that shows a list of item.
  termsOfService: ''
  contact:
    email: info@it4all.hu
  version: 1.0.0
tags:
  - name: Grid
    description: Grid
paths:
  /grid/{uuid}/{gridIdentifier}/load:
    post:
      tags:
      - grid
      summary: ''
      operationId: 'load'
      parameters: 
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
        - in: path
          name: gridIdentifier
          schema:
            type: string
          required: true
          description: ''
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GridModel'
  /grid/{uuid}/{gridIdentifier}/page/{offset}/{limit}:
    post:
      tags:
      - grid
      summary: ''
      operationId: 'setPage'
      parameters: 
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
        - in: path
          name: gridIdentifier
          schema:
            type: string
          required: true
          description: ''
        - in: path
          name: offset
          schema:
            type: string
          required: true
          description: ''
        - in: path
          name: limit
          schema:
            type: string
          required: true
          description: ''
      responses:
        '200':
          description: ''
  /grid/{uuid}/{gridIdentifier}/performAction/{actionIdentifier}:
    post:
      tags:
      - grid
      summary: ''
      operationId: 'performAction'
      parameters: 
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
        - in: path
          name: gridIdentifier
          schema:
            type: string
          required: true
          description: ''
        - in: path
          name: actionIdentifier
          schema:
            type: string
          required: true
          description: ''
      responses:
        '200':
          description: 'OK'
        '404':
          description: 'NOK'
components:
  schemas:
    GridDataAccessConfig:
      type: object
      description: |
        This is the backend object to setup the grid access api. The parameterization contain all the possible
        parameters requiered to identify the API to call or even the InvocationRequest to use. Register into the
        parameters of the View parameters as grid.identifier.config
      required: []
      properties:
        dataUri:
          type: string
          format: uri
          description: The uri of the table data that contains the data of the list.
        propertyPath:
          type: string
          description: The property path to access the data of the grid in the referred object.
        apiClass:
          type: string
        kind:
          enum: [TABLEDATA, OBJECTLIST, APIBASED, INVOCATIONS]
    GridModel:
      type: object
      description: |
        This object respresent the model of a grid component.
      required: [viewOptions, page]
      properties:
        viewUuid:
          type: string
          format: uuid
        availableViews:
          type: array
          items:
            $ref: '#/components/schemas/GridView'
        view:
          $ref: '#/components/schemas/GridView'
        accessConfig:
          $ref: '#/components/schemas/GridDataAccessConfig'
        page:
          $ref: '#/components/schemas/GridPage'
        totalRowCount:
          type: integer
          format: int32
        pageSize:
          type: integer
          format: int32
    GridPage:
      type: object
      description: |
        This object containt the page information of the content. The currently seen row range, the total row cont and other options.
      required: [columns]
      properties:
        lowerBound:
          type: integer
          format: int32
          description: The index of the first row in the current page. Startes from 1 and inclusive.
        upperBound:
          type: integer
          format: int32
          description: The index of the last row in the current page inclusive.
        rows:
          type: array
          items:
            $ref: '#/components/schemas/GridRow'
    GridRow:
      type: object
      description: |
        This object is a grid row containening the identifier and actions releted with the row.
      required: [actions]
      properties:
        id:
          type: string
        actions:
          type: array
          items:
            type: UiAction
        data:
          type: object
    GridView:
      type: object
      description: |
        The configuration of the grid view. It can be a simple table grid but a complex card representation also. A model
        has one or more view option to render the content.
      required: [orderedColumnNames]
      properties:
        descriptor:
          $ref: '#/components/schemas/GridViewDescriptor'
        orderedColumnNames:
          type: array
          items:
            type: string
        orderByList:
          type: array
          items:
            type: FilterExpressionOrderBy
    GridViewDescriptor:
      type: object
      description: |
        The configuration of the grid view. It can be a simple table grid but a complex card representation also. A model
        has one or more view option to render the content.
      required: [columns]
      properties:
        label:
          type: string
        icon:
          type: string
        kind:
          enum: [TABLE, EXPANDABLECARDS1]
        columns:
          type: array
          items:
            $ref: '#/components/schemas/GridColumnMeta'
    GridColumnMeta:
      type: object
      required: [label, propertyName]
      properties:
        label:
          type: string
        propertyName:
          type: string
        typeClass:
          type: string
